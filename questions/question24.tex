\section{Определитель матрицы с нулевой строкой/столбцом. Определитель матрицы с пропорциональными строками. Изменение определителя при элементарных преобразованиях строк/столбцов. Определитель треугольной матрицы. Алгоритм вычисления определителя с помощью элементарных преобрвазований. Эквивалентные условия невырожденности матрицы. Определитель матрицы с углом нулей}

\begin{lemma}
    Определитель матрицы со строкой нулей равен нулю.
\end{lemma}

\begin{proof}
    Пусть $i$-ая строка матрицы нулевая. В каждом слагаемом из формулы определителя присутствует множитель $a_{i\sigma(i)} = 0$. Поэтому каждое слагаемое равно нулю, поэтому нулю равна вся сумма, т.\,е. определитель.
\end{proof}

\begin{theorem}[Изменения определителя при элементарных преобразованиях]
    При элементарных преобразованиях
    \begin{itemize}[nolistsep]
        \item 1-го типа определитель не изменяется;
        \item 2-го типа определитель умножается на $-1$;
        \item 3-го типа умножается на ненулевую константу.
    \end{itemize}
\end{theorem}

\begin{proof}
    Докажем через определение, а потом обсудим, почему лучше делать так, а не как рассказывал Сергей Александрович на лекциях.
    \begin{enumerate}
        \item Пусть к $i$-ой строке прибавили $j$-ую с коэффициентом $\lambda$. Тогда определитель новой матрицы равен
            $$
            \sum_{\sigma \in S_n}\sgn\sigma \cdot a_{1\sigma(1)} \ldots (a_{i\sigma(i)} + \lambda a_{j\sigma(i)}) \ldots \ldots a_{n\sigma(n)} = \det A + \sum_{\sigma \in S_n}\sgn\sigma \cdot a_{1\sigma(1)} \ldots a_{j\sigma(i)} \ldots a_{j\sigma(j)} \ldots a_{n\sigma(n)}.
            $$

            Посмотрим на образовавшуюся сумму. Как мы уже знаем, каждой подстановке $\sigma$ можно биективно сопоставить подстановку $\delta = \sigma \circ [i, j]$ (при этом $\sigma(i) = \delta(j)$, $\sigma(j) = \delta(i)$, а остальные элементы переходят туда же, куда и раньше). Поэтому возникает биекция между слагаемыми нашей суммы:
            $$
            \sgn\sigma \cdot a_{1\sigma(1)} \ldots a_{j\sigma(i)} \ldots a_{j\sigma(j)} \ldots a_{n\sigma(n)} \mapsto -\sgn\sigma a_{1\delta(1)} \ldots a_{j\delta(j)} \ldots a_{i\delta(i)} \ldots a_{n\delta(n)}.
            $$

            Они отличаются только знаком, поэтому в сумме дают $0$. А значит, и вся сумма равна $0$ и остаётся только $\det A$.

        \item Это буквально кососимметричность.
        \item Пусть $i$-ую строку матрицы умножили на $c \ne 0$. Тогда в каждом слагаемом формулы определителя новой матрицы будет присутствовать ровно один множитель из $i$-ой строки, $c \cdot a_{i\sigma(i)}$. Поэтому, вынеся из каждого слагаемого константу $c$, получим, что определитель новой матрицы равен $c \cdot \det A$.
    \end{enumerate}
\end{proof}

\begin{remark}
    На лекциях Сергей Александрович давал другое доказательство того, что определитель не изменяется при элементарных преобразованиях первого типа. Сначала доказывалась лемма, что определитель с двумя одинаковыми строками равен нулю. Доказательство было такое: если поменять эти строки местами, то из кососимметричности знак определителя изменится, а сама матрица при этом не поменяется. Поэтому $\det A = -\det A$, а отсюда $\det A = 0$. Проблема вот в чём: это доказательство не работает для матриц над полем с характеристикой 2, потому что над этим полем равенство $2 \cdot \det A = 0$ не влечёт $\det A = 0$, т.\,к. $2$ --- это и есть $0$ (примером такого поля служит $\Z_2$). Мне на это указал принимающий на коллоквиуме, и я придумал доказательство выше.
\end{remark}

\begin{theorem}
    Определитель треугольной матрицы равен произведению элементов на её главной диагонали.
\end{theorem}

\begin{lemma}
    Для любой нетождественной подстановки $\sigma \in S_n$ существует $i \in \Omega_n$ такой, что $i > \sigma(i)$.
\end{lemma}

\begin{proof}
    Докажем утверждение индукцией по $n$.

    \textbf{База индукции} ($n = 2$). Единственная нетождественная подстановка порядка $2$ --- это $[1, 2]$. При этом, $2 > [1, 2](2) = 1$.

    \textbf{Шаг}. Пусть утверждение верно для любого $n < m$. Пусть $\sigma \in S_m$ --- нетождественая подстановка. Если $\sigma(m) = m$, то можно рассмотреть её без последнего элемента. Так как если $i \ne m$, то $i \in \Omega_{m - 1}$ и $\sigma(i) \in \Omega_{m - 1}$, то имеем подстановку $\sigma^\prime \in S_{m - 1}$ такую, что $\sigma^\prime(j) = \sigma(j)$ для каждого $j \in \Omega_{m - 1}$. Если для неё не существует такого $i$, что $i > \sigma^\prime(i)$, то по предположению индукции она тождественная. Но тогда и $\sigma$ тождественная. 

    А если $\sigma(m) \ne m$, то $\sigma(m) = i \in \Omega_{m - 1}$, а значит $m > \sigma(m)$.
\end{proof}

Теперь докажем теорему 24.2:

\begin{proof}
    Докажем теорему для нижнетреугольных матриц, к случаю верхнетреугольных матриц утверждение будет сводиться транспозицией. Итак, формула для определителя:
    $$
    \det A = \sum_{\sigma \in S_n}\sgn\sigma \cdot a_{1\sigma(1)}\ldots a_{n\sigma(n)}.
    $$

    Тождественная подстановка $\sigma$ соответствует слагаемому $a_{11} \cdot \ldots \cdot a_{nn}$ (т.\,е. как раз произведению элементов на главной диагонали). А для любой другой подстановки найдётся $i$ такое, что $i > \sigma(i)$, иными словами $a_{i\sigma(i)}$ будет находится выше главной диагонали, а потому $a_{i\sigma(i)} = 0$, а значит, занулится всё слагаемое.
\end{proof}

\textbf{Алгоритм вычисления определителя с помощью элементарных преобразований}. Пусть мы хотим найти определитель матрицы $A$. Для этого будем приводить её к ступенчатому виду элементарными преобразованиями. При этом, следить за тем, преобразований каких типов мы применяем и домножать результат на $c^{-1}$, если применяем преобразование 3-го типа с константой $c$ и на $-1$, если применяем преобразование 2-го типа (из линейности). А ступенчатый вид --- это треугольная матрица, для неё определитель --- это произведение диагональных элементов.

\begin{theorem}[Эквивалентные условия невырожденности матрицы]
    Следующие условия эквивалентны:
    \begin{enumerate}[nolistsep]
        \item К матрице $A$ существует обратная.
        \item $\rk A = n$.
        \item $\det A \ne 0$.
    \end{enumerate}
\end{theorem}

\begin{proof}
    Равносильность между первым и вторым пунктами уже была доказана. Докажем равносильность между вторым и третьим пунктами. 

    $\Rightarrow$. Если $\rk A = n$, то улучшенный ступенчатый вид матрицы $A$ единичный, поэтому, находя определитель с помощью элементарных преобразований, не получим ни одного нулевого множителя. А значит, $\det A \ne 0$.

    $\Leftarrow$. Находя $\det A$ с помощью элементарных преобразований, получаем $\det A = \lambda \det \widetilde{A}$, где $\widetilde{A}$ --- улучшенный ступенчатый вид матрицы $A$, а $\lambda \ne 0$. $\det A \ne 0 \Rightarrow \det \widetilde{A} \ne 0$. А $\widetilde{A}$ --- треугольная матрица, и её определитель равен произведению элементов на главной диагонали. Оно ненулевое, значит, $\widetilde{A} = E$. Отсюда следует невырожденность матрицы и $\rk A = n$.
\end{proof}

\begin{theorem}[Об определителе матрицы с углом нулей]
    Пусть матрица $A$ имеет вид
    $$
    A =
    \begin{pmatrix}
        B & D\\
        0 & C
    \end{pmatrix},
    $$
    где $B$ и $C$ --- квадратные матрицы. Тогда
    $$
    \det A = \det B \cdot \det C.
    $$
\end{theorem}

\begin{proof}
    При фиксированных $B$ и $D$ определитель матрицы $A$ является полилинейной и кососимметричной её последних строк и, тем самым, кососимметричной и полилинейной функцией строк матрицы $C$. Согласно теореме 25.1, получаем
    $$
    \det A = \det
    \begin{pmatrix}
        B & D\\
        0 & E
    \end{pmatrix} \cdot \det C.
    $$

    Первый множитель, в свою очередь, является полилинейной и кососимметричной функцией первых столбцов матрицы, а потому (по той же теореме) получаем
    $$
    \det A = \det
    \begin{pmatrix}
        B & D\\
        0 & E
    \end{pmatrix} \cdot \det C = 
    \det 
    \begin{pmatrix}
        E & D\\
        0 & E
    \end{pmatrix} \cdot \det B \cdot \det C,
    $$
    но матрица $
    \begin{pmatrix}
        E & D\\
        0 & E
    \end{pmatrix}
    $ треугольная с единицами на главной диагонали, поэтому её определитель равен $1$.
\end{proof}

\begin{statement}[Задача Антона Александровича]
    Если матрицы $A$ и $C$ коммутируют, то
    $$
    \det
    \begin{pmatrix}
        A & B\\
        C & D
    \end{pmatrix} = 
    \det(AD - CB).
    $$
\end{statement}


